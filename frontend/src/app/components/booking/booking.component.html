<div class="booking-page">
  <div class="booking-container">
    <!-- Back Button -->
    <button class="back-btn" (click)="goBack()">← Back</button>

    <h1>Book Flight</h1>

    <!-- Loading -->
    <div *ngIf="isLoading" class="loading">Loading flight details...</div>

    <!-- Flight Info -->
    <div *ngIf="!isLoading && flight" class="flight-info">
      <p><strong>Flight:</strong> {{ flight.flightNumber }}</p>
      <p><strong>Route:</strong> {{ flight.fromCity }} → {{ flight.toCity }}</p>
      <p><strong>Price:</strong> ₹{{ flight.cost }}</p>
    </div>

    <!-- Success Message -->
    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
      <br><br>
      <button class="back-btn" (click)="goBack()">Go to Home</button>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

    <!-- Form -->
    <form *ngIf="!isLoading && flight && !successMessage" class="booking-form" (ngSubmit)="submitBooking()">
      <div class="form-group">
        <label>Passenger Name</label>
        <input type="text" [(ngModel)]="bookingForm.passengerName" name="passengerName" placeholder="Enter full name" />
      </div>

      <div class="form-group">
        <label>Age</label>
        <input type="number" [(ngModel)]="bookingForm.age" name="age" placeholder="Age" min="1" />
      </div>

      <div class="form-group">
        <label>Gender</label>
        <select [(ngModel)]="bookingForm.gender" name="gender">
          <option value="MALE">Male</option>
          <option value="FEMALE">Female</option>
          <option value="OTHER">Other</option>
        </select>
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" [(ngModel)]="bookingForm.email" name="email" placeholder="Enter email" />
      </div>

      <div class="form-group">
        <label>Meal Preference</label>
        <select [(ngModel)]="bookingForm.meal" name="meal">
          <option value="NONE">No Meal</option>
          <option value="VEG">Vegetarian</option>
          <option value="NONVEG">Non-Vegetarian</option>
        </select>
      </div>

      <div class="form-group">
        <label>Number of Tickets</label>
        <input type="number" [(ngModel)]="bookingForm.numberOfTickets" name="numberOfTickets" min="1" max="10" />
      </div>

      <div class="form-actions">
        <button type="button" class="btn-cancel" (click)="goBack()">Cancel</button>
        <button type="submit" class="btn-submit" [disabled]="isSubmitting || !isFormValid()">
          {{ isSubmitting ? 'Booking...' : 'Confirm Booking' }}
        </button>
      </div>
    </form>
  </div>
</div>

