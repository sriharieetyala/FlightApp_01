<div class="min-vh-100 d-flex align-items-center justify-content-center bg-light py-5">
  <div class="card shadow-sm border-0" style="width: 100%; max-width: 420px;">
    <div class="card-body p-4">

      <h2 class="fw-bold text-center mb-4">Change Password</h2>

      <!-- Password Expired Warning -->
      <div *ngIf="isPasswordExpired" class="alert alert-warning">
        ⚠️ Your password has expired (older than 30 days). Please create a new password to continue.
      </div>

      <form (ngSubmit)="onSubmit()">
        <!-- Messages -->
        <div *ngIf="errorMessage" class="alert alert-danger py-2">{{ errorMessage }}</div>
        <div *ngIf="successMessage" class="alert alert-success py-2">{{ successMessage }}</div>

        <div class="mb-3">
          <label for="currentPassword" class="form-label">Current Password</label>
          <input type="password" id="currentPassword" class="form-control" [(ngModel)]="currentPassword"
            name="currentPassword" placeholder="Enter current password" required />
        </div>

        <div class="mb-3">
          <label for="newPassword" class="form-label">New Password</label>
          <input type="password" id="newPassword" class="form-control" [(ngModel)]="newPassword" name="newPassword"
            placeholder="Create a strong password" required />

          <!-- Password requirements -->
          <div class="mt-2 small">
            <p class="text-muted mb-1">Password must contain:</p>
            <ul class="list-unstyled ps-2 small">
              <li [class.text-success]="hasMinLength" [class.text-muted]="!hasMinLength">
                {{ hasMinLength ? '✓' : '○' }} At least 6 characters
              </li>
              <li [class.text-success]="hasUppercase" [class.text-muted]="!hasUppercase">
                {{ hasUppercase ? '✓' : '○' }} 1 uppercase letter (A-Z)
              </li>
              <li [class.text-success]="hasLowercase" [class.text-muted]="!hasLowercase">
                {{ hasLowercase ? '✓' : '○' }} 1 lowercase letter (a-z)
              </li>
              <li [class.text-success]="hasSpecialChar" [class.text-muted]="!hasSpecialChar">
                {{ hasSpecialChar ? '✓' : '○' }} 1 special character (!@#$%^&* etc.)
              </li>
            </ul>
          </div>
        </div>

        <div class="mb-4">
          <label for="confirmPassword" class="form-label">Confirm Password</label>
          <input type="password" id="confirmPassword" class="form-control" [(ngModel)]="confirmPassword"
            name="confirmPassword" placeholder="Re-enter new password" required />
          <small *ngIf="getPasswordError()" class="text-danger">{{ getPasswordError() }}</small>
        </div>

        <button type="submit" class="btn btn-accent w-100 py-2" [disabled]="isSubmitting || !isFormValid()">
          {{ isSubmitting ? 'Changing...' : 'Change Password' }}
        </button>
      </form>
    </div>
  </div>
</div>